{% extends "video_base.html" %}

{% block video %}
    <video width="{{ video.get_width() }}" height="{{ video.get_height() }}" controls
            {% if video.has_poster %}
           data-poster="http://assets.localcity.com/video/{{ video.file_name }}.poster.svg"
            {% endif %}
            preload="auto"
            >
        {% for source in video.files %}
            {% if not source.is_fullscreen %}
                <source src="http://assets.localcity.com/video/{{ video.file_name }}.{{ source.extention }}"
                        type='video/{{ source.Mime_Type }}; codecs="{{ source.Video_Codec }}{{ source.get_audio_codec_if_present() }}"'
                        {% if source.has_fullscreen %}
                        data-fullscreen="true"
                        {% endif %}

                        >
            {% endif %}
        {% endfor %}
        {% for track in video.tracks %}
            <track src="http://assets.localcity.com/video/{{ track.get_url(video) }}" lang="{{ track.src_lang }}" type="{{ track.type }}" label="{{ track.label }}"/>
        {% endfor %}
    </video>
{% endblock %}

{% block poster %}
    {% if not video.has_start_poster %}
        No start poster.
    {% else %}
        <a rel="enclosure" href="http://assets.localcity.com/video/{{ video.get_start_poster_url() }}">Start poster</a>
    {% endif %}

    {% if not video.has_end_poster %}
        No end poster.
    {% else %}
        <a rel="enclosure" href="http://assets.localcity.com/video/{{ video.get_end_poster_url() }}">End poster</a>
    {% endif %}
{% endblock %}

{% block videoFiles %}
    {% for file in video.files %}
        {% if file.is_fullscreen %}
            <li>
                <a rel="enclosure" href="http://assets.localcity.com/video/{{ video.file_name }}.fullscreen.{{ file.extention }}">{{ video.file_name }}.{{ file.extention }}</a><br>
                {{ file.resolution }} {{ file.Video_Codec }} {{ file.get_audio_codec_if_present() }}
            </li>
        {% else %}
            <li>
                <a rel="enclosure" href="http://assets.localcity.com/video/{{ video.file_name }}.{{ file.extention }}">{{ video.file_name }}.{{ file.extention }}</a> <br>
                {{ file.resolution }} {{ file.Video_Codec }} {{ file.get_audio_codec_if_present() }}
            </li>
        {% endif %}
    {% endfor %}
{% endblock %}

{% block tracks %}
    {% if video.tracks|length %}
        <ul>
            {% for track in video.tracks %}
                <li><a rel="enclosure" href="https://asset.themetacity.com/video/{{ track.get_url(video) }}">{{ track.get_description() }}</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tracks.</p>
    {% endif %}
{% endblock %}