{% extends "video_base.html" %}

{% block video %}
    <video width="{{ video.get_width() }}" height="{{ video.get_height() }}" controls
            {% if video.has_poster %}
           data-poster="http://assets.localcity.com/video/{{ video.file_name }}.poster.svg"
            {% endif %}
            >
        {% for source in video.files %}
            {% if not source.is_fullscreen %}
                <source src="http://assets.localcity.com/video/{{ video.file_name }}.{{ source.extention }}"
                        type='video/{{ source.Mime_Type }}; codecs="{{ source.Video_Codec }}{{ source.get_audio_codec_if_present() }}"'
                        {% if source.has_fullscreen %}
                        data-fullscreen="true"
                        {% endif %}
                        >
            {% endif %}
        {% endfor %}
    </video>
{% endblock %}

{% block poster %}
    {% if not video.has_poster %}
        No poster.
    {% else %}
        <a rel="enclosure" href="/video/{{ video.get_poster_url() }}">{{ super() }}</a>
    {% endif %}
{% endblock %}

{% block videoFiles %}
    {% for file in video.files %}
        {% if file.is_fullscreen %}
            <li>
                <a rel="enclosure" href="http://assets.localcity.com/video/{{ video.file_name }}.fullscreen.{{ file.extention }}">{{ video.file_name }}.{{ file.extention }}</a> {{ file.resolution }}
            </li>
        {% else %}
            <li>
                <a rel="enclosure" href="http://assets.localcity.com/video/{{ video.file_name }}.{{ file.extention }}">{{ video.file_name }}.{{ file.extention }}</a> {{ file.resolution }}
            </li>
        {% endif %}
    {% endfor %}
{% endblock %}

{% block tracks %}
    {% if video.tracks|length %}
        <ul>
            {% for track in video.tracks %}
                <li><a rel="enclosure" href="{{ track.get_url(video) }}">{{ track.get_description() }}</a></li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tracks.</p>
    {% endif %}
{% endblock %}

{% block about %}
    {{ video.about }}
{% endblock %}

{% block licence %}
<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/MovingImage" property="dct:title" rel="dct:type">{{ video.title }}</span>
 by <a xmlns:cc="http://creativecommons.org/ns#" href="http://media.themetacity.com" property="cc:attributionName" rel="cc:attributionURL">
 Douglas Miller</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
{% endblock %}